<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Итоговый тест по оказанию первой помощи — Учебный портал</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description"
        content="Итоговый тест по оказанию первой помощи пострадавшим с обязательным указанием персональных и организационных данных работника.">
  <link rel="stylesheet" href="assets/style.css">
</head>
<body>
  <a class="skip-link" href="#main-content">Перейти к основному содержимому</a>

  <header class="site-header">
    <div class="container header-inner">
      <div class="header-brand">
        <p class="site-label">Дистанционный учебный портал</p>
        <h1 class="site-title">Охрана труда, пожарная безопасность, первая помощь, ГО/ЧС</h1>
        <p class="site-subtitle">
          Итоговый тест по программе обучения по оказанию первой помощи пострадавшим.
        </p>
      </div>
      <nav class="main-nav" aria-label="Основная навигация">
        <ul class="nav-list">
          <li class="nav-item"><a href="index.html" class="nav-link">Главная</a></li>
          <li class="nav-item"><a href="programs.html" class="nav-link nav-link-active">Программы обучения</a></li>
          <li class="nav-item"><a href="instructions.html" class="nav-link">Инструкции для сотрудников</a></li>
          <li class="nav-item"><a href="for-responsibles.html" class="nav-link">Информация для ответственных за обучение</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="main-content" class="site-main">
    <div class="container">
      
      <!-- Кнопка возврата к курсу -->
      <nav class="back-nav">
        <a href="course-first-aid.html" class="back-link">
          <span class="back-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" class="back-svg">
              <path d="M15 6l-6 6 6 6"
                    stroke="white"
                    stroke-width="2"
                    fill="none"
                    stroke-linecap="round"
                    stroke-linejoin="round" />
            </svg>
          </span>
          <span class="back-text">Вернуться к курсу по оказанию первой помощи</span>
        </a>
      </nav>

      <!-- Заголовок теста -->
      <section class="section section-card test-page-header">
        <div class="page-header-label">Итоговый тест</div>
        <h2 class="page-title">Итоговый тест по оказанию первой помощи пострадавшим</h2>
        <p class="page-lead">
          Данный тест предназначен для фиксации результатов дистанционного обучения по оказанию первой помощи
          пострадавшим. Перед началом тестирования работнику необходимо внимательно ознакомиться с материалами курса.
        </p>
        <p class="note">
          При прохождении теста предусмотрено обязательное указание персональных и организационных данных.
          Невнесение данных может привести к невозможности зачёта результатов обучения.
        </p>
      </section>

      <!-- Блок согласия с чекбоксом -->
      <section class="section section-card">
        <h2>Согласие на обработку персональных данных</h2>

        <p>
          Перед началом прохождения итогового теста работник подтверждает, что ознакомлен(а) и принимает
          следующие условия обработки персональных данных в соответствии с Федеральным законом № 152-ФЗ
          «О персональных данных», Трудовым кодексом РФ и локальными нормативными актами работодателя.
        </p>

        <ul class="checklist">
          <li>обработку персональных данных, указанных в тестовой форме (ФИО, дата рождения, должность, подразделение, наименование организации);</li>
          <li>обработку результатов прохождения тестирования, включая количество набранных баллов, время прохождения и факт успешного/неуспешного завершения теста;</li>
          <li>передачу указанных данных уполномоченным должностным лицам работодателя, ответственным за обучение и проверку знаний;</li>
          <li>хранение данных в информационных системах работодателя в срок, установленный локальными актами (не менее срока хранения документов по обучению);</li>
          <li>использование результатов теста для оформления протоколов проверки знаний, журналов регистрации, приказов и иных документов по обучению;</li>
          <li>передачу данных оператору тестирующей платформы OnlineTestPad в объёме, необходимом для проведения тестирования.</li>
        </ul>

        <p class="note">
          Обработка персональных данных осуществляется исключительно в целях организации и проведения обучения,
          тестирования и последующего документального оформления результатов в соответствии с требованиями
          законодательства РФ. Персональные данные не передаются третьим лицам, за исключением случаев,
          предусмотренных законом.
        </p>

        <label class="consent-label">
          <input type="checkbox" id="pd-consent">
          <span>Я подтверждаю, что ознакомлен(а) с условиями обработки персональных данных и даю согласие на их обработку для целей обучения и тестирования.</span>
        </label>
      </section>

      <!-- Прохождение теста: кнопка + виджет -->
      <section class="section section-card">
        <h2>Прохождение теста</h2>
        <p>
          Для сдачи итогового теста используйте встроенный ниже модуль OnlineTestPad.
          Если модуль не загрузился, можно открыть тест в новой вкладке.
        </p>

        <!-- Кнопка -->
        <div class="test-actions">
          <button id="start-test-btn"
                  class="btn btn-primary btn-test-link btn-disabled"
                  type="button"
                  disabled>
            Перейти к тесту по первой помощи (в новой вкладке)
          </button>
          <p class="test-hint">
            Кнопка станет доступна после подтверждения согласия на обработку персональных данных.
          </p>
        </div>

        <!-- Встроенный виджет OnlineTestPad с блокировкой до согласия -->
        <div class="google-form-wrapper test-wrapper-with-consent">
          <div id="otp_wgt_25zvn65rav464"></div>
          <div id="test-overlay" class="test-overlay">
            <p>Для доступа к тесту необходимо подтвердить согласие на обработку персональных данных выше.</p>
          </div>
        </div>

        <!-- Скрипт виджета OnlineTestPad -->
        <script type="text/javascript">
          var otp_wjs_dt = (new Date).getTime();
          (function (w, d, n, s, rp) {
            w[n] = w[n] || [];
            rp = {};
            w[n].push(function () {
              otp_render_widget(
                d.getElementById("otp_wgt_25zvn65rav464"),
                'onlinetestpad.com',
                '25zvn65rav464',
                rp
              );
            });
            s = d.createElement("script");
            s.type = "text/javascript";
            s.src = "https://onlinetestpad.com/js/widget.js?" + otp_wjs_dt;
            s.async = true;
            d.getElementsByTagName("head")[0].appendChild(s);
          })(this, this.document, "otp_widget_callbacks");
        </script>

        <p class="note">
          Обработка результатов тестирования осуществляется сервисом OnlineTestPad. Порядок передачи данных,
          хранения результатов и оформления документов определяется работодателем в соответствии с локальными
          нормативными актами и требованиями законодательства РФ.
        </p>
      </section>

    </div>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <p class="footer-text">
        Учебный портал дистанционного обучения по охране труда, пожарной безопасности,
        первой помощи и ГО/ЧС.
      </p>
      <p class="footer-text footer-text-muted">
        Конкретные условия, порядок обучения и оформления документов устанавливаются работодателем
        в локальных нормативных актах.
      </p>
    </div>
  </footer>

  <!-- Скрипт управления согласием и доступом к тесту -->
  <script>
document.addEventListener('DOMContentLoaded', function () {
  const consentCheckbox = document.getElementById('pd-consent');
  const startButton = document.getElementById('start-test-btn');
  const overlay = document.getElementById('test-overlay');

  const testUrl = 'https://onlinetestpad.com/3szjxbxlhjdeo';

  function updateConsentState() {
    const allowed = consentCheckbox.checked;

    if (allowed) {
      startButton.disabled = false;
      startButton.classList.remove('btn-disabled');
      overlay.classList.add('test-overlay-hidden');
    } else {
      startButton.disabled = true;
      startButton.classList.add('btn-disabled');
      overlay.classList.remove('test-overlay-hidden');
    }
  }

  consentCheckbox.addEventListener('change', updateConsentState);

  startButton.addEventListener('click', function () {
    if (!startButton.disabled) {
      window.open(testUrl, '_blank', 'noopener,noreferrer');
    }
  });

  updateConsentState();
});
</script>
</body>
</html>
